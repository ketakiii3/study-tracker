<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0a0a0f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="StudyFlow">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <title>StudyFlow - Academic Tracker</title>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('SW registered'))
          .catch(err => console.log('SW registration failed'));
      });
    }
  </script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-tertiary: #1a1a24;
      --bg-card: linear-gradient(135deg, rgba(26, 26, 36, 0.8) 0%, rgba(18, 18, 26, 0.9) 100%);
      --text-primary: #f5f5f7;
      --text-secondary: #a1a1aa;
      --text-muted: #71717a;
      --accent-purple: #a78bfa;
      --accent-blue: #60a5fa;
      --accent-green: #4ade80;
      --accent-orange: #fb923c;
      --accent-pink: #f472b6;
      --accent-cyan: #22d3d8;
      --accent-red: #f87171;
      --accent-yellow: #facc15;
      --border-subtle: rgba(255, 255, 255, 0.06);
      --border-medium: rgba(255, 255, 255, 0.1);
      --glass: rgba(255, 255, 255, 0.03);
      --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
    }
    
    body {
      font-family: 'Instrument Sans', -apple-system, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    #root {
      min-height: 100vh;
    }
    
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--border-medium);
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
  
  <script type="text/babel">
    const { useState, useEffect, createContext, useContext } = React;
    const { motion, AnimatePresence } = Motion;
    
    // ============ DATA CONTEXT ============
    const DataContext = createContext();
    
    const defaultCourses = [
      { id: '1', code: 'COMS6706E', name: 'Advanced Spoken Language Processing', color: '#a78bfa' },
      { id: '2', code: 'COMS6998E', name: 'Topics in Computer Science', color: '#60a5fa' },
      { id: '3', code: 'STAT4243GU', name: 'Applied Data Science', color: '#4ade80' },
      { id: '4', code: 'COMS4111W', name: 'Introduction to Databases', color: '#fb923c' },
    ];
    
    const assignmentTypes = [
      'Reading', 'Homework', 'Prelab', 'Lab Report', 
      'Presentation', 'Project', 'Paper', 'Quiz', 'Exam'
    ];
    
    const statusOptions = ['Not Started', 'In Progress', 'Complete', 'Submitted'];
    
    const DataProvider = ({ children }) => {
      const [courses, setCourses] = useState(() => {
        const saved = localStorage.getItem('studyflow_courses');
        return saved ? JSON.parse(saved) : defaultCourses;
      });
      
      const [assignments, setAssignments] = useState(() => {
        const saved = localStorage.getItem('studyflow_assignments');
        return saved ? JSON.parse(saved) : [];
      });
      
      const [jobPrep, setJobPrep] = useState(() => {
        const saved = localStorage.getItem('studyflow_jobprep');
        return saved ? JSON.parse(saved) : {
          resumes: [],
          coverLetters: [],
          templates: [],
          applications: [],
          studyTopics: []
        };
      });
      
      const [grades, setGrades] = useState(() => {
        const saved = localStorage.getItem('studyflow_grades');
        return saved ? JSON.parse(saved) : [];
      });
      
      useEffect(() => {
        localStorage.setItem('studyflow_courses', JSON.stringify(courses));
      }, [courses]);
      
      useEffect(() => {
        localStorage.setItem('studyflow_assignments', JSON.stringify(assignments));
      }, [assignments]);
      
      useEffect(() => {
        localStorage.setItem('studyflow_jobprep', JSON.stringify(jobPrep));
      }, [jobPrep]);
      
      useEffect(() => {
        localStorage.setItem('studyflow_grades', JSON.stringify(grades));
      }, [grades]);
      
      return (
        <DataContext.Provider value={{
          courses, setCourses,
          assignments, setAssignments,
          jobPrep, setJobPrep,
          grades, setGrades,
          assignmentTypes, statusOptions
        }}>
          {children}
        </DataContext.Provider>
      );
    };
    
    const useData = () => useContext(DataContext);
    
    // ============ ICONS ============
    const Icons = {
      home: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>,
      book: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>,
      briefcase: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>,
      chart: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>,
      calendar: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>,
      plus: <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>,
      check: <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><polyline points="20,6 9,17 4,12"/></svg>,
      x: <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
      trash: <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3,6 5,6 21,6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
      edit: <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>,
      clock: <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/></svg>,
      search: <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>,
    };
    
    // ============ SHARED COMPONENTS ============
    const Card = ({ children, className = '', style = {}, ...props }) => (
      <motion.div
        style={{
          background: 'var(--bg-card)',
          borderRadius: 'var(--radius-lg)',
          border: '1px solid var(--border-subtle)',
          backdropFilter: 'blur(20px)',
          ...style
        }}
        {...props}
      >
        {children}
      </motion.div>
    );
    
    const Button = ({ children, variant = 'primary', size = 'md', style = {}, ...props }) => {
      const variants = {
        primary: { background: 'linear-gradient(135deg, #a78bfa 0%, #818cf8 100%)', color: '#fff', border: 'none' },
        secondary: { background: 'var(--glass)', color: 'var(--text-primary)', border: '1px solid var(--border-medium)' },
        ghost: { background: 'transparent', color: 'var(--text-secondary)', border: 'none' },
        danger: { background: 'rgba(248, 113, 113, 0.15)', color: '#f87171', border: '1px solid rgba(248, 113, 113, 0.3)' }
      };
      
      const sizes = {
        sm: { padding: '8px 14px', fontSize: '13px' },
        md: { padding: '12px 20px', fontSize: '14px' },
        lg: { padding: '16px 28px', fontSize: '16px' },
      };
      
      return (
        <motion.button
          whileHover={{ scale: 1.02 }}
          whileTap={{ scale: 0.98 }}
          style={{
            ...variants[variant],
            ...sizes[size],
            borderRadius: 'var(--radius-md)',
            fontFamily: 'inherit',
            fontWeight: 600,
            cursor: 'pointer',
            display: 'inline-flex',
            alignItems: 'center',
            justifyContent: 'center',
            gap: '8px',
            transition: 'all 0.2s ease',
            ...style
          }}
          {...props}
        >
          {children}
        </motion.button>
      );
    };
    
    const Input = ({ label, style = {}, ...props }) => (
      <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>
        {label && <label style={{ fontSize: '13px', color: 'var(--text-secondary)', fontWeight: 500 }}>{label}</label>}
        <input
          style={{
            background: 'var(--bg-tertiary)',
            border: '1px solid var(--border-medium)',
            borderRadius: 'var(--radius-md)',
            padding: '12px 16px',
            color: 'var(--text-primary)',
            fontSize: '14px',
            fontFamily: 'inherit',
            outline: 'none',
            ...style
          }}
          {...props}
        />
      </div>
    );
    
    const Select = ({ label, options, style = {}, ...props }) => (
      <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>
        {label && <label style={{ fontSize: '13px', color: 'var(--text-secondary)', fontWeight: 500 }}>{label}</label>}
        <select
          style={{
            background: 'var(--bg-tertiary)',
            border: '1px solid var(--border-medium)',
            borderRadius: 'var(--radius-md)',
            padding: '12px 16px',
            color: 'var(--text-primary)',
            fontSize: '14px',
            fontFamily: 'inherit',
            outline: 'none',
            cursor: 'pointer',
            ...style
          }}
          {...props}
        >
          {options.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}
        </select>
      </div>
    );
    
    const TextArea = ({ label, style = {}, ...props }) => (
      <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>
        {label && <label style={{ fontSize: '13px', color: 'var(--text-secondary)', fontWeight: 500 }}>{label}</label>}
        <textarea
          style={{
            background: 'var(--bg-tertiary)',
            border: '1px solid var(--border-medium)',
            borderRadius: 'var(--radius-md)',
            padding: '12px 16px',
            color: 'var(--text-primary)',
            fontSize: '14px',
            fontFamily: 'inherit',
            outline: 'none',
            resize: 'vertical',
            minHeight: '100px',
            ...style
          }}
          {...props}
        />
      </div>
    );
    
    const Badge = ({ children, color = '#a78bfa', style = {} }) => (
      <span style={{
        display: 'inline-flex',
        alignItems: 'center',
        padding: '4px 10px',
        borderRadius: '20px',
        fontSize: '11px',
        fontWeight: 600,
        textTransform: 'uppercase',
        letterSpacing: '0.5px',
        background: `${color}20`,
        color: color,
        border: `1px solid ${color}40`,
        ...style
      }}>
        {children}
      </span>
    );
    
    const StatusBadge = ({ status }) => {
      const colors = { 'Not Started': '#71717a', 'In Progress': '#60a5fa', 'Complete': '#4ade80', 'Submitted': '#a78bfa' };
      return <Badge color={colors[status] || '#71717a'}>{status}</Badge>;
    };
    
    // ============ MODAL ============
    const Modal = ({ isOpen, onClose, title, children }) => (
      <AnimatePresence>
        {isOpen && (
          <>
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              onClick={onClose}
              style={{ position: 'fixed', inset: 0, background: 'rgba(0, 0, 0, 0.7)', backdropFilter: 'blur(8px)', zIndex: 100 }}
            />
            <motion.div
              initial={{ opacity: 0, scale: 0.95, y: 20 }}
              animate={{ opacity: 1, scale: 1, y: 0 }}
              exit={{ opacity: 0, scale: 0.95, y: 20 }}
              style={{
                position: 'fixed',
                top: '50%',
                left: '50%',
                transform: 'translate(-50%, -50%)',
                background: 'var(--bg-secondary)',
                borderRadius: 'var(--radius-xl)',
                border: '1px solid var(--border-medium)',
                padding: '28px',
                width: '90%',
                maxWidth: '500px',
                maxHeight: '85vh',
                overflow: 'auto',
                zIndex: 101,
                boxShadow: 'var(--shadow-lg)',
              }}
            >
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px' }}>
                <h2 style={{ fontFamily: "'Fraunces', serif", fontSize: '22px', fontWeight: 600 }}>{title}</h2>
                <button onClick={onClose} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', padding: '4px' }}>{Icons.x}</button>
              </div>
              {children}
            </motion.div>
          </>
        )}
      </AnimatePresence>
    );
    
    // ============ NAVIGATION ============
    const Navigation = ({ activeTab, setActiveTab }) => {
      const tabs = [
        { id: 'dashboard', icon: Icons.home, label: 'Home' },
        { id: 'assignments', icon: Icons.book, label: 'Tasks' },
        { id: 'calendar', icon: Icons.calendar, label: 'Calendar' },
        { id: 'jobprep', icon: Icons.briefcase, label: 'Career' },
        { id: 'grades', icon: Icons.chart, label: 'Grades' },
      ];
      
      return (
        <nav style={{
          position: 'fixed',
          bottom: 0,
          left: 0,
          right: 0,
          background: 'linear-gradient(to top, var(--bg-primary) 0%, rgba(10, 10, 15, 0.95) 100%)',
          backdropFilter: 'blur(20px)',
          borderTop: '1px solid var(--border-subtle)',
          padding: '12px 16px 28px',
          zIndex: 50,
        }}>
          <div style={{ display: 'flex', justifyContent: 'space-around', maxWidth: '500px', margin: '0 auto' }}>
            {tabs.map(tab => (
              <motion.button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                whileTap={{ scale: 0.9 }}
                style={{
                  background: 'none',
                  border: 'none',
                  display: 'flex',
                  flexDirection: 'column',
                  alignItems: 'center',
                  gap: '4px',
                  cursor: 'pointer',
                  padding: '8px 12px',
                  color: activeTab === tab.id ? 'var(--accent-purple)' : 'var(--text-muted)',
                }}
              >
                {tab.icon}
                <span style={{ fontSize: '11px', fontWeight: 500 }}>{tab.label}</span>
                {activeTab === tab.id && (
                  <motion.div layoutId="navIndicator" style={{ width: '4px', height: '4px', borderRadius: '50%', background: 'var(--accent-purple)', marginTop: '2px' }} />
                )}
              </motion.button>
            ))}
          </div>
        </nav>
      );
    };
    
    // ============ DASHBOARD ============
    const Dashboard = ({ setActiveTab, setShowAddAssignment }) => {
      const { assignments, courses } = useData();
      
      const today = new Date();
      const upcoming = assignments
        .filter(a => a.status !== 'Complete' && a.status !== 'Submitted')
        .filter(a => new Date(a.dueDate) >= today)
        .sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate))
        .slice(0, 5);
      
      const overdue = assignments.filter(a => {
        const due = new Date(a.dueDate);
        return due < today && a.status !== 'Complete' && a.status !== 'Submitted';
      });
      
      const completed = assignments.filter(a => a.status === 'Complete' || a.status === 'Submitted').length;
      const inProgress = assignments.filter(a => a.status === 'In Progress').length;
      
      const getCourse = (id) => courses.find(c => c.id === id) || { code: '???', color: '#71717a' };
      
      const formatDate = (date) => {
        const d = new Date(date);
        const diff = Math.ceil((d - today) / (1000 * 60 * 60 * 24));
        if (diff === 0) return 'Today';
        if (diff === 1) return 'Tomorrow';
        if (diff < 7) return `${diff} days`;
        return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
      };
      
      return (
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} style={{ padding: '24px 20px 120px' }}>
          <motion.div initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} style={{ marginBottom: '32px' }}>
            <p style={{ color: 'var(--text-muted)', fontSize: '14px', marginBottom: '4px' }}>
              {today.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}
            </p>
            <h1 style={{
              fontFamily: "'Fraunces', serif",
              fontSize: '32px',
              fontWeight: 700,
              background: 'linear-gradient(135deg, var(--text-primary) 0%, var(--accent-purple) 100%)',
              WebkitBackgroundClip: 'text',
              WebkitTextFillColor: 'transparent',
              marginBottom: '4px'
            }}>
              Hey, Ketaki ‚ú®
            </h1>
            <p style={{ color: 'var(--text-secondary)', fontSize: '15px' }}>
              {upcoming.length > 0 ? `You have ${upcoming.length} upcoming ${upcoming.length === 1 ? 'task' : 'tasks'}` : "You're all caught up!"}
            </p>
          </motion.div>
          
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '12px', marginBottom: '28px' }}>
            {[
              { label: 'Overdue', value: overdue.length, color: '#f87171', icon: '‚ö†Ô∏è' },
              { label: 'In Progress', value: inProgress, color: '#60a5fa', icon: 'üîÑ' },
              { label: 'Completed', value: completed, color: '#4ade80', icon: '‚úì' },
              { label: 'Total', value: assignments.length, color: '#a78bfa', icon: 'üìö' },
            ].map((stat, i) => (
              <Card key={stat.label} initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.2 + i * 0.05 }} style={{ padding: '18px' }}>
                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                  <div>
                    <p style={{ fontSize: '28px', fontWeight: 700, color: stat.color, fontFamily: "'Fraunces', serif" }}>{stat.value}</p>
                    <p style={{ fontSize: '12px', color: 'var(--text-muted)', textTransform: 'uppercase', letterSpacing: '0.5px', marginTop: '4px' }}>{stat.label}</p>
                  </div>
                  <span style={{ fontSize: '20px' }}>{stat.icon}</span>
                </div>
              </Card>
            ))}
          </motion.div>
          
          {overdue.length > 0 && (
            <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }} style={{
              background: 'linear-gradient(135deg, rgba(248, 113, 113, 0.15) 0%, rgba(248, 113, 113, 0.05) 100%)',
              borderRadius: 'var(--radius-lg)',
              border: '1px solid rgba(248, 113, 113, 0.3)',
              padding: '16px 20px',
              marginBottom: '28px',
              display: 'flex',
              alignItems: 'center',
              gap: '12px'
            }}>
              <span style={{ fontSize: '24px' }}>üî•</span>
              <div>
                <p style={{ fontWeight: 600, color: '#f87171', marginBottom: '2px' }}>{overdue.length} overdue {overdue.length === 1 ? 'task' : 'tasks'}</p>
                <p style={{ fontSize: '13px', color: 'var(--text-muted)' }}>Don't worry, you've got this!</p>
              </div>
            </motion.div>
          )}
          
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }}>
            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
              <h2 style={{ fontFamily: "'Fraunces', serif", fontSize: '18px', fontWeight: 600 }}>Coming Up</h2>
              <Button variant="ghost" size="sm" onClick={() => setActiveTab('assignments')}>View All</Button>
            </div>
            
            {upcoming.length === 0 ? (
              <Card style={{ padding: '40px 20px', textAlign: 'center' }}>
                <span style={{ fontSize: '48px', display: 'block', marginBottom: '12px' }}>üéâ</span>
                <p style={{ color: 'var(--text-secondary)' }}>No upcoming tasks!</p>
                <Button variant="secondary" size="sm" style={{ marginTop: '16px' }} onClick={() => setShowAddAssignment(true)}>{Icons.plus} Add Task</Button>
              </Card>
            ) : (
              <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                {upcoming.map((task, i) => {
                  const course = getCourse(task.courseId);
                  return (
                    <motion.div key={task.id} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.4 + i * 0.05 }}>
                      <Card style={{ padding: '16px 18px', display: 'flex', alignItems: 'center', gap: '14px', borderLeft: `3px solid ${course.color}` }}>
                        <div style={{ width: '42px', height: '42px', borderRadius: 'var(--radius-md)', background: `${course.color}15`, display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '18px', flexShrink: 0 }}>
                          {task.type === 'Reading' ? 'üìñ' : task.type === 'Homework' ? 'üìù' : task.type === 'Exam' ? 'üìã' : task.type === 'Project' ? 'üöÄ' : task.type === 'Quiz' ? '‚ùì' : task.type === 'Presentation' ? 'üé§' : 'üìÑ'}
                        </div>
                        <div style={{ flex: 1, minWidth: 0 }}>
                          <p style={{ fontWeight: 600, fontSize: '14px', marginBottom: '4px', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{task.title}</p>
                          <div style={{ display: 'flex', alignItems: 'center', gap: '8px', fontSize: '12px', color: 'var(--text-muted)' }}>
                            <span style={{ color: course.color }}>{course.code}</span>
                            <span>‚Ä¢</span>
                            <span>{task.type}</span>
                          </div>
                        </div>
                        <div style={{ textAlign: 'right', flexShrink: 0 }}>
                          <p style={{ fontSize: '13px', fontWeight: 600, color: new Date(task.dueDate) <= today ? '#f87171' : 'var(--text-primary)' }}>{formatDate(task.dueDate)}</p>
                          <StatusBadge status={task.status} />
                        </div>
                      </Card>
                    </motion.div>
                  );
                })}
              </div>
            )}
          </motion.div>
          
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.6 }} style={{ marginTop: '28px' }}>
            <h2 style={{ fontFamily: "'Fraunces', serif", fontSize: '18px', fontWeight: 600, marginBottom: '16px' }}>Quick Actions</h2>
            <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>
              <Button variant="secondary" onClick={() => setShowAddAssignment(true)}>{Icons.plus} Add Task</Button>
              <Button variant="secondary" onClick={() => setActiveTab('jobprep')}>{Icons.briefcase} Career Prep</Button>
              <Button variant="secondary" onClick={() => setActiveTab('grades')}>{Icons.chart} Grades</Button>
            </div>
          </motion.div>
        </motion.div>
      );
    };
    
    // ============ ASSIGNMENTS PAGE ============
    const AssignmentsPage = ({ showAddAssignment, setShowAddAssignment }) => {
      const { assignments, setAssignments, courses, assignmentTypes, statusOptions } = useData();
      const [filter, setFilter] = useState({ course: 'all', type: 'all', status: 'all' });
      const [editingTask, setEditingTask] = useState(null);
      const [searchQuery, setSearchQuery] = useState('');
      
      const getCourse = (id) => courses.find(c => c.id === id) || { code: '???', color: '#71717a' };
      
      const filteredAssignments = assignments.filter(a => {
        if (filter.course !== 'all' && a.courseId !== filter.course) return false;
        if (filter.type !== 'all' && a.type !== filter.type) return false;
        if (filter.status !== 'all' && a.status !== filter.status) return false;
        if (searchQuery && !a.title.toLowerCase().includes(searchQuery.toLowerCase())) return false;
        return true;
      }).sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));
      
      const groupedByType = assignmentTypes.reduce((acc, type) => {
        const items = filteredAssignments.filter(a => a.type === type);
        if (items.length > 0) acc[type] = items;
        return acc;
      }, {});
      
      const updateStatus = (id, newStatus) => {
        setAssignments(prev => prev.map(a => a.id === id ? { ...a, status: newStatus } : a));
      };
      
      const deleteAssignment = (id) => {
        setAssignments(prev => prev.filter(a => a.id !== id));
      };
      
      return (
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} style={{ padding: '24px 20px 120px' }}>
          <motion.h1 initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} style={{ fontFamily: "'Fraunces', serif", fontSize: '28px', fontWeight: 700, marginBottom: '24px' }}>Assignments</motion.h1>
          
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} style={{ display: 'flex', gap: '12px', marginBottom: '20px' }}>
            <div style={{ flex: 1, position: 'relative' }}>
              <div style={{ position: 'absolute', left: '14px', top: '50%', transform: 'translateY(-50%)', color: 'var(--text-muted)' }}>{Icons.search}</div>
              <input placeholder="Search tasks..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} style={{ width: '100%', background: 'var(--bg-tertiary)', border: '1px solid var(--border-medium)', borderRadius: 'var(--radius-md)', padding: '12px 16px 12px 44px', color: 'var(--text-primary)', fontSize: '14px', fontFamily: 'inherit', outline: 'none' }} />
            </div>
            <Button onClick={() => setShowAddAssignment(true)}>{Icons.plus}</Button>
          </motion.div>
          
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} style={{ display: 'flex', gap: '8px', marginBottom: '24px', overflowX: 'auto', paddingBottom: '8px' }}>
            <select value={filter.course} onChange={(e) => setFilter(f => ({ ...f, course: e.target.value }))} style={{ background: 'var(--bg-tertiary)', border: '1px solid var(--border-medium)', borderRadius: 'var(--radius-md)', padding: '8px 12px', color: 'var(--text-primary)', fontSize: '13px', fontFamily: 'inherit', outline: 'none', cursor: 'pointer', minWidth: 'fit-content' }}>
              <option value="all">All Courses</option>
              {courses.map(c => <option key={c.id} value={c.id}>{c.code}</option>)}
            </select>
            
            <select value={filter.type} onChange={(e) => setFilter(f => ({ ...f, type: e.target.value }))} style={{ background: 'var(--bg-tertiary)', border: '1px solid var(--border-medium)', borderRadius: 'var(--radius-md)', padding: '8px 12px', color: 'var(--text-primary)', fontSize: '13px', fontFamily: 'inherit', outline: 'none', cursor: 'pointer', minWidth: 'fit-content' }}>
              <option value="all">All Types</option>
              {assignmentTypes.map(t => <option key={t} value={t}>{t}</option>)}
            </select>
            
            <select value={filter.status} onChange={(e) => setFilter(f => ({ ...f, status: e.target.value }))} style={{ background: 'var(--bg-tertiary)', border: '1px solid var(--border-medium)', borderRadius: 'var(--radius-md)', padding: '8px 12px', color: 'var(--text-primary)', fontSize: '13px', fontFamily: 'inherit', outline: 'none', cursor: 'pointer', minWidth: 'fit-content' }}>
              <option value="all">All Status</option>
              {statusOptions.map(s => <option key={s} value={s}>{s}</option>)}
            </select>
          </motion.div>
          
          {Object.keys(groupedByType).length === 0 ? (
            <Card style={{ padding: '60px 20px', textAlign: 'center' }}>
              <span style={{ fontSize: '56px', display: 'block', marginBottom: '16px' }}>üìö</span>
              <p style={{ color: 'var(--text-secondary)', marginBottom: '4px' }}>No assignments found</p>
              <p style={{ color: 'var(--text-muted)', fontSize: '13px' }}>Add your first task to get started</p>
            </Card>
          ) : (
            Object.entries(groupedByType).map(([type, tasks], groupIndex) => (
              <motion.div key={type} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 + groupIndex * 0.05 }} style={{ marginBottom: '28px' }}>
                <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '12px' }}>
                  <span style={{ fontSize: '18px' }}>{type === 'Reading' ? 'üìñ' : type === 'Homework' ? 'üìù' : type === 'Exam' ? 'üìã' : type === 'Project' ? 'üöÄ' : type === 'Quiz' ? '‚ùì' : type === 'Presentation' ? 'üé§' : type === 'Paper' ? 'üìÑ' : type === 'Lab Report' ? 'üß™' : type === 'Prelab' ? 'üî¨' : 'üìÑ'}</span>
                  <h3 style={{ fontFamily: "'Fraunces', serif", fontSize: '16px', fontWeight: 600 }}>{type}</h3>
                  <span style={{ fontSize: '12px', color: 'var(--text-muted)', background: 'var(--bg-tertiary)', padding: '2px 8px', borderRadius: '10px' }}>{tasks.length}</span>
                </div>
                
                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                  {tasks.map((task, i) => {
                    const course = getCourse(task.courseId);
                    const isOverdue = new Date(task.dueDate) < new Date() && task.status !== 'Complete' && task.status !== 'Submitted';
                    
                    return (
                      <Card key={task.id} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 * i }} style={{ padding: '14px 16px', borderLeft: `3px solid ${course.color}`, opacity: task.status === 'Complete' || task.status === 'Submitted' ? 0.6 : 1 }}>
                        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '12px' }}>
                          <button onClick={() => updateStatus(task.id, task.status === 'Complete' ? 'Not Started' : 'Complete')} style={{ width: '22px', height: '22px', borderRadius: '6px', border: task.status === 'Complete' || task.status === 'Submitted' ? 'none' : '2px solid var(--border-medium)', background: task.status === 'Complete' || task.status === 'Submitted' ? 'var(--accent-green)' : 'transparent', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#fff', flexShrink: 0, marginTop: '2px' }}>
                            {(task.status === 'Complete' || task.status === 'Submitted') && Icons.check}
                          </button>
                          
                          <div style={{ flex: 1, minWidth: 0 }}>
                            <p style={{ fontWeight: 600, fontSize: '14px', marginBottom: '6px', textDecoration: task.status === 'Complete' || task.status === 'Submitted' ? 'line-through' : 'none', color: task.status === 'Complete' || task.status === 'Submitted' ? 'var(--text-muted)' : 'var(--text-primary)' }}>{task.title}</p>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flexWrap: 'wrap' }}>
                              <span style={{ fontSize: '12px', color: course.color, fontWeight: 500 }}>{course.code}</span>
                              <span style={{ fontSize: '12px', color: isOverdue ? '#f87171' : 'var(--text-muted)', display: 'flex', alignItems: 'center', gap: '4px' }}>
                                {Icons.clock}
                                {new Date(task.dueDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}
                                {isOverdue && ' (overdue)'}
                              </span>
                            </div>
                          </div>
                          
                          <div style={{ display: 'flex', gap: '4px', flexShrink: 0 }}>
                            <button onClick={() => setEditingTask(task)} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', padding: '6px' }}>{Icons.edit}</button>
                            <button onClick={() => deleteAssignment(task.id)} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', padding: '6px' }}>{Icons.trash}</button>
                          </div>
                        </div>
                      </Card>
                    );
                  })}
                </div>
              </motion.div>
            ))
          )}
          
          <AddAssignmentModal isOpen={showAddAssignment} onClose={() => setShowAddAssignment(false)} editingTask={null} setEditingTask={() => {}} />
          {editingTask && <AddAssignmentModal isOpen={!!editingTask} onClose={() => setEditingTask(null)} editingTask={editingTask} setEditingTask={setEditingTask} />}
        </motion.div>
      );
    };
    
    // ============ ADD ASSIGNMENT MODAL ============
    const AddAssignmentModal = ({ isOpen, onClose, editingTask, setEditingTask }) => {
      const { setAssignments, courses, assignmentTypes, statusOptions } = useData();
      
      const [form, setForm] = useState({ title: '', courseId: courses[0]?.id || '', type: 'Homework', status: 'Not Started', dueDate: new Date().toISOString().split('T')[0], notes: '' });
      
      useEffect(() => {
        if (editingTask) {
          setForm({ title: editingTask.title, courseId: editingTask.courseId, type: editingTask.type, status: editingTask.status, dueDate: editingTask.dueDate, notes: editingTask.notes || '' });
        } else {
          setForm({ title: '', courseId: courses[0]?.id || '', type: 'Homework', status: 'Not Started', dueDate: new Date().toISOString().split('T')[0], notes: '' });
        }
      }, [editingTask, isOpen]);
      
      const handleSubmit = (e) => {
        e.preventDefault();
        if (!form.title.trim()) return;
        
        if (editingTask) {
          setAssignments(prev => prev.map(a => a.id === editingTask.id ? { ...a, ...form } : a));
          setEditingTask(null);
        } else {
          setAssignments(prev => [...prev, { ...form, id: Date.now().toString() }]);
        }
        onClose();
      };
      
      return (
        <Modal isOpen={isOpen} onClose={() => { onClose(); setEditingTask?.(null); }} title={editingTask ? 'Edit Task' : 'Add New Task'}>
          <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '18px' }}>
            <Input label="Title" placeholder="e.g., Read Chapter 5" value={form.title} onChange={(e) => setForm(f => ({ ...f, title: e.target.value }))} required />
            <Select label="Course" value={form.courseId} onChange={(e) => setForm(f => ({ ...f, courseId: e.target.value }))} options={courses.map(c => ({ value: c.id, label: `${c.code} - ${c.name}` }))} />
            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>
              <Select label="Type" value={form.type} onChange={(e) => setForm(f => ({ ...f, type: e.target.value }))} options={assignmentTypes.map(t => ({ value: t, label: t }))} />
              <Select label="Status" value={form.status} onChange={(e) => setForm(f => ({ ...f, status: e.target.value }))} options={statusOptions.map(s => ({ value: s, label: s }))} />
            </div>
            <Input label="Due Date" type="date" value={form.dueDate} onChange={(e) => setForm(f => ({ ...f, dueDate: e.target.value }))} />
            <TextArea label="Notes (optional)" placeholder="Any additional details..." value={form.notes} onChange={(e) => setForm(f => ({ ...f, notes: e.target.value }))} />
            <div style={{ display: 'flex', gap: '12px', marginTop: '8px' }}>
              <Button type="button" variant="secondary" onClick={onClose} style={{ flex: 1 }}>Cancel</Button>
              <Button type="submit" style={{ flex: 1 }}>{editingTask ? 'Save Changes' : 'Add Task'}</Button>
            </div>
          </form>
        </Modal>
      );
    };
    
    // ============ CALENDAR PAGE ============
    const CalendarPage = () => {
      const { assignments, courses } = useData();
      const [currentDate, setCurrentDate] = useState(new Date());
      
      const getCourse = (id) => courses.find(c => c.id === id) || { code: '???', color: '#71717a' };
      
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      
      const days = [];
      for (let i = 0; i < firstDay; i++) days.push(null);
      for (let i = 1; i <= daysInMonth; i++) days.push(i);
      
      const getAssignmentsForDay = (day) => {
        if (!day) return [];
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        return assignments.filter(a => a.dueDate === dateStr);
      };
      
      const today = new Date();
      const isToday = (day) => day === today.getDate() && month === today.getMonth() && year === today.getFullYear();
      
      return (
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} style={{ padding: '24px 20px 120px' }}>
          <motion.h1 initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} style={{ fontFamily: "'Fraunces', serif", fontSize: '28px', fontWeight: 700, marginBottom: '24px' }}>Calendar</motion.h1>
          
          <Card style={{ padding: '20px', marginBottom: '20px' }}>
            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>
              <Button variant="ghost" onClick={() => setCurrentDate(new Date(year, month - 1, 1))}>‚Üê</Button>
              <h2 style={{ fontFamily: "'Fraunces', serif", fontSize: '18px', fontWeight: 600 }}>{currentDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</h2>
              <Button variant="ghost" onClick={() => setCurrentDate(new Date(year, month + 1, 1))}>‚Üí</Button>
            </div>
            
            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '4px', marginBottom: '8px' }}>
              {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
                <div key={day} style={{ textAlign: 'center', fontSize: '11px', fontWeight: 600, color: 'var(--text-muted)', textTransform: 'uppercase', padding: '8px 0' }}>{day}</div>
              ))}
            </div>
            
            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '4px' }}>
              {days.map((day, i) => {
                const dayAssignments = getAssignmentsForDay(day);
                return (
                  <div key={i} style={{ aspectRatio: '1', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'flex-start', padding: '6px 2px', borderRadius: 'var(--radius-sm)', background: isToday(day) ? 'linear-gradient(135deg, var(--accent-purple) 0%, #818cf8 100%)' : day ? 'var(--bg-tertiary)' : 'transparent' }}>
                    {day && (
                      <>
                        <span style={{ fontSize: '13px', fontWeight: isToday(day) ? 700 : 500, color: isToday(day) ? '#fff' : 'var(--text-primary)' }}>{day}</span>
                        {dayAssignments.length > 0 && (
                          <div style={{ display: 'flex', gap: '2px', marginTop: '4px', flexWrap: 'wrap', justifyContent: 'center' }}>
                            {dayAssignments.slice(0, 3).map((a, j) => (
                              <div key={j} style={{ width: '6px', height: '6px', borderRadius: '50%', background: getCourse(a.courseId).color }} />
                            ))}
                          </div>
                        )}
                      </>
                    )}
                  </div>
                );
              })}
            </div>
          </Card>
          
          <h2 style={{ fontFamily: "'Fraunces', serif", fontSize: '18px', fontWeight: 600, marginBottom: '16px' }}>This Month's Tasks</h2>
          
          {(() => {
            const monthAssignments = assignments.filter(a => {
              const d = new Date(a.dueDate);
              return d.getMonth() === month && d.getFullYear() === year;
            }).sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));
            
            if (monthAssignments.length === 0) {
              return <Card style={{ padding: '40px 20px', textAlign: 'center' }}><p style={{ color: 'var(--text-muted)' }}>No tasks this month</p></Card>;
            }
            
            return (
              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                {monthAssignments.map(task => {
                  const course = getCourse(task.courseId);
                  return (
                    <Card key={task.id} style={{ padding: '14px 16px', borderLeft: `3px solid ${course.color}` }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                        <div>
                          <p style={{ fontWeight: 600, fontSize: '14px', marginBottom: '4px' }}>{task.title}</p>
                          <p style={{ fontSize: '12px', color: 'var(--text-muted)' }}><span style={{ color: course.color }}>{course.code}</span> ‚Ä¢ {task.type}</p>
                        </div>
                        <div style={{ textAlign: 'right' }}>
                          <p style={{ fontSize: '13px', fontWeight: 500 }}>{new Date(task.dueDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</p>
                          <StatusBadge status={task.status} />
                        </div>
                      </div>
                    </Card>
                  );
                })}
              </div>
            );
          })()}
        </motion.div>
      );
    };
    
    // ============ JOB PREP PAGE ============
    const JobPrepPage = () => {
      const { jobPrep, setJobPrep } = useData();
      const [activeSection, setActiveSection] = useState('overview');
      const [showAddModal, setShowAddModal] = useState(null);
      
      const sections = [
        { id: 'overview', label: 'Overview', icon: 'üìä' },
        { id: 'resumes', label: 'Resumes', icon: 'üìÑ' },
        { id: 'coverLetters', label: 'Letters', icon: '‚úâÔ∏è' },
        { id: 'templates', label: 'Templates', icon: 'üìã' },
        { id: 'applications', label: 'Apps', icon: 'üéØ' },
        { id: 'study', label: 'Study', icon: 'üìö' },
      ];
      
      const addItem = (section, item) => {
        setJobPrep(prev => ({ ...prev, [section]: [...(prev[section] || []), { ...item, id: Date.now().toString() }] }));
        setShowAddModal(null);
      };
      
      const deleteItem = (section, id) => {
        setJobPrep(prev => ({ ...prev, [section]: prev[section].filter(item => item.id !== id) }));
      };
      
      const updateItem = (section, id, updates) => {
        setJobPrep(prev => ({ ...prev, [section]: prev[section].map(item => item.id === id ? { ...item, ...updates } : item) }));
      };
      
      return (
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} style={{ padding: '24px 20px 120px' }}>
          <motion.h1 initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} style={{ fontFamily: "'Fraunces', serif", fontSize: '28px', fontWeight: 700, marginBottom: '8px' }}>Career Prep</motion.h1>
          <p style={{ color: 'var(--text-muted)', marginBottom: '24px', fontSize: '14px' }}>Track your job search journey</p>
          
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} style={{ display: 'flex', gap: '8px', marginBottom: '24px', overflowX: 'auto', paddingBottom: '8px' }}>
            {sections.map(section => (
              <button key={section.id} onClick={() => setActiveSection(section.id)} style={{ background: activeSection === section.id ? 'linear-gradient(135deg, var(--accent-purple) 0%, #818cf8 100%)' : 'var(--bg-tertiary)', border: '1px solid', borderColor: activeSection === section.id ? 'transparent' : 'var(--border-medium)', borderRadius: 'var(--radius-md)', padding: '10px 16px', color: activeSection === section.id ? '#fff' : 'var(--text-secondary)', fontSize: '13px', fontWeight: 500, fontFamily: 'inherit', cursor: 'pointer', whiteSpace: 'nowrap', display: 'flex', alignItems: 'center', gap: '6px' }}>
                <span>{section.icon}</span>{section.label}
              </button>
            ))}
          </motion.div>
          
          {activeSection === 'overview' && (
            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>
              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '12px', marginBottom: '24px' }}>
                {[
                  { label: 'Resumes', count: jobPrep.resumes?.length || 0, color: '#60a5fa', icon: 'üìÑ' },
                  { label: 'Cover Letters', count: jobPrep.coverLetters?.length || 0, color: '#4ade80', icon: '‚úâÔ∏è' },
                  { label: 'Applications', count: jobPrep.applications?.length || 0, color: '#fb923c', icon: 'üéØ' },
                  { label: 'Study Topics', count: jobPrep.studyTopics?.length || 0, color: '#a78bfa', icon: 'üìö' },
                ].map(stat => (
                  <Card key={stat.label} style={{ padding: '18px' }}>
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                      <div>
                        <p style={{ fontSize: '28px', fontWeight: 700, color: stat.color, fontFamily: "'Fraunces', serif" }}>{stat.count}</p>
                        <p style={{ fontSize: '12px', color: 'var(--text-muted)', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{stat.label}</p>
                      </div>
                      <span style={{ fontSize: '20px' }}>{stat.icon}</span>
                    </div>
                  </Card>
                ))}
              </div>
              
              <h3 style={{ fontFamily: "'Fraunces', serif", fontSize: '16px', fontWeight: 600, marginBottom: '12px' }}>Recent Applications</h3>
              {(jobPrep.applications?.length || 0) === 0 ? (
                <Card style={{ padding: '30px 20px', textAlign: 'center' }}>
                  <p style={{ color: 'var(--text-muted)', marginBottom: '12px' }}>No applications tracked yet</p>
                  <Button variant="secondary" size="sm" onClick={() => setActiveSection('applications')}>Add Application</Button>
                </Card>
              ) : (
                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                  {jobPrep.applications.slice(0, 3).map(app => (
                    <Card key={app.id} style={{ padding: '14px 16px' }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                        <div>
                          <p style={{ fontWeight: 600, fontSize: '14px' }}>{app.company}</p>
                          <p style={{ fontSize: '12px', color: 'var(--text-muted)' }}>{app.position}</p>
                        </div>
                        <Badge color={app.status === 'Applied' ? '#60a5fa' : app.status === 'Interview' ? '#4ade80' : app.status === 'Offer' ? '#a78bfa' : app.status === 'Rejected' ? '#f87171' : '#71717a'}>{app.status}</Badge>
                      </div>
                    </Card>
                  ))}
                </div>
              )}
            </motion.div>
          )}
          
          {activeSection === 'resumes' && (
            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                <h3 style={{ fontFamily: "'Fraunces', serif", fontSize: '16px', fontWeight: 600 }}>My Resumes</h3>
                <Button size="sm" onClick={() => setShowAddModal('resumes')}>{Icons.plus} Add</Button>
              </div>
              
              {(jobPrep.resumes?.length || 0) === 0 ? (
                <Card style={{ padding: '40px 20px', textAlign: 'center' }}>
                  <span style={{ fontSize: '40px', display: 'block', marginBottom: '12px' }}>üìÑ</span>
                  <p style={{ color: 'var(--text-muted)' }}>No resumes added yet</p>
                </Card>
              ) : (
                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                  {jobPrep.resumes.map(resume => (
                    <Card key={resume.id} style={{ padding: '16px' }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                        <div style={{ flex: 1 }}>
                          <p style={{ fontWeight: 600, fontSize: '14px', marginBottom: '4px' }}>{resume.name}</p>
                          <p style={{ fontSize: '12px', color: 'var(--text-muted)', marginBottom: '8px' }}>{resume.targetRole || 'General'}</p>
                          {resume.notes && <p style={{ fontSize: '13px', color: 'var(--text-secondary)' }}>{resume.notes}</p>}
                        </div>
                        <button onClick={() => deleteItem('resumes', resume.id)} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', padding: '4px' }}>{Icons.trash}</button>
                      </div>
                    </Card>
                  ))}
                </div>
              )}
            </motion.div>
          )}
          
          {activeSection === 'coverLetters' && (
            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                <h3 style={{ fontFamily: "'Fraunces', serif", fontSize: '16px', fontWeight: 600 }}>Cover Letters</h3>
                <Button size="sm" onClick={() => setShowAddModal('coverLetters')}>{Icons.plus} Add</Button>
              </div>
              
              {(jobPrep.coverLetters?.length || 0) === 0 ? (
                <Card style={{ padding: '40px 20px', textAlign: 'center' }}>
                  <span style={{ fontSize: '40px', display: 'block', marginBottom: '12px' }}>‚úâÔ∏è</span>
                  <p style={{ color: 'var(--text-muted)' }}>No cover letters added yet</p>
                </Card>
              ) : (
                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                  {jobPrep.coverLetters.map(letter => (
                    <Card key={letter.id} style={{ padding: '16px' }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                        <div style={{ flex: 1 }}>
                          <p style={{ fontWeight: 600, fontSize: '14px', marginBottom: '4px' }}>{letter.name}</p>
                          <p style={{ fontSize: '12px', color: 'var(--text-muted)', marginBottom: '8px' }}>For: {letter.company || 'General'}</p>
                          {letter.content && <p style={{ fontSize: '13px', color: 'var(--text-secondary)', whiteSpace: 'pre-wrap', maxHeight: '100px', overflow: 'hidden' }}>{letter.content.substring(0, 200)}...</p>}
                        </div>
                        <button onClick={() => deleteItem('coverLetters', letter.id)} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', padding: '4px' }}>{Icons.trash}</button>
                      </div>
                    </Card>
                  ))}
                </div>
              )}
            </motion.div>
          )}
          
          {activeSection === 'templates' && (
            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                <h3 style={{ fontFamily: "'Fraunces', serif", fontSize: '16px', fontWeight: 600 }}>Templates</h3>
                <Button size="sm" onClick={() => setShowAddModal('templates')}>{Icons.plus} Add</Button>
              </div>
              
              {(jobPrep.templates?.length || 0) === 0 ? (
                <Card style={{ padding: '40px 20px', textAlign: 'center' }}>
                  <span style={{ fontSize: '40px', display: 'block', marginBottom: '12px' }}>üìã</span>
                  <p style={{ color: 'var(--text-muted)' }}>No templates added yet</p>
                  <p style={{ fontSize: '12px', color: 'var(--text-muted)', marginTop: '8px' }}>Save email templates, follow-up messages, etc.</p>
                </Card>
              ) : (
                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                  {jobPrep.templates.map(template => (
                    <Card key={template.id} style={{ padding: '16px' }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                        <div style={{ flex: 1 }}>
                          <p style={{ fontWeight: 600, fontSize: '14px', marginBottom: '4px' }}>{template.name}</p>
                          <Badge color="#a78bfa" style={{ marginBottom: '8px' }}>{template.type}</Badge>
                          <p style={{ fontSize: '13px', color: 'var(--text-secondary)', whiteSpace: 'pre-wrap' }}>{template.content}</p>
                        </div>
                        <button onClick={() => deleteItem('templates', template.id)} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', padding: '4px' }}>{Icons.trash}</button>
                      </div>
                    </Card>
                  ))}
                </div>
              )}
            </motion.div>
          )}
          
          {activeSection === 'applications' && (
            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                <h3 style={{ fontFamily: "'Fraunces', serif", fontSize: '16px', fontWeight: 600 }}>Applications</h3>
                <Button size="sm" onClick={() => setShowAddModal('applications')}>{Icons.plus} Add</Button>
              </div>
              
              {(jobPrep.applications?.length || 0) === 0 ? (
                <Card style={{ padding: '40px 20px', textAlign: 'center' }}>
                  <span style={{ fontSize: '40px', display: 'block', marginBottom: '12px' }}>üéØ</span>
                  <p style={{ color: 'var(--text-muted)' }}>No applications tracked yet</p>
                </Card>
              ) : (
                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                  {jobPrep.applications.map(app => (
                    <Card key={app.id} style={{ padding: '16px' }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                        <div style={{ flex: 1 }}>
                          <p style={{ fontWeight: 600, fontSize: '15px', marginBottom: '4px' }}>{app.company}</p>
                          <p style={{ fontSize: '13px', color: 'var(--text-secondary)', marginBottom: '8px' }}>{app.position}</p>
                          <div style={{ display: 'flex', gap: '8px', alignItems: 'center', flexWrap: 'wrap' }}>
                            <Badge color={app.status === 'Applied' ? '#60a5fa' : app.status === 'Interview' ? '#4ade80' : app.status === 'Offer' ? '#a78bfa' : app.status === 'Rejected' ? '#f87171' : '#71717a'}>{app.status}</Badge>
                            {app.dateApplied && <span style={{ fontSize: '12px', color: 'var(--text-muted)' }}>Applied: {new Date(app.dateApplied).toLocaleDateString()}</span>}
                          </div>
                          {app.notes && <p style={{ fontSize: '12px', color: 'var(--text-muted)', marginTop: '8px' }}>{app.notes}</p>}
                        </div>
                        <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>
                          <select value={app.status} onChange={(e) => updateItem('applications', app.id, { status: e.target.value })} style={{ background: 'var(--bg-tertiary)', border: '1px solid var(--border-medium)', borderRadius: 'var(--radius-sm)', padding: '4px 8px', color: 'var(--text-primary)', fontSize: '11px', fontFamily: 'inherit', cursor: 'pointer' }}>
                            <option value="Wishlist">Wishlist</option>
                            <option value="Applied">Applied</option>
                            <option value="Interview">Interview</option>
                            <option value="Offer">Offer</option>
                            <option value="Rejected">Rejected</option>
                          </select>
                          <button onClick={() => deleteItem('applications', app.id)} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', padding: '4px', alignSelf: 'flex-end' }}>{Icons.trash}</button>
                        </div>
                      </div>
                    </Card>
                  ))}
                </div>
              )}
            </motion.div>
          )}
          
          {activeSection === 'study' && (
            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                <h3 style={{ fontFamily: "'Fraunces', serif", fontSize: '16px', fontWeight: 600 }}>Study Topics</h3>
                <Button size="sm" onClick={() => setShowAddModal('studyTopics')}>{Icons.plus} Add</Button>
              </div>
              
              <p style={{ fontSize: '13px', color: 'var(--text-muted)', marginBottom: '16px' }}>Track topics for interviews, coding prep, system design, etc.</p>
              
              {(jobPrep.studyTopics?.length || 0) === 0 ? (
                <Card style={{ padding: '40px 20px', textAlign: 'center' }}>
                  <span style={{ fontSize: '40px', display: 'block', marginBottom: '12px' }}>üìö</span>
                  <p style={{ color: 'var(--text-muted)' }}>No study topics added yet</p>
                </Card>
              ) : (
                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                  {jobPrep.studyTopics.map(topic => (
                    <Card key={topic.id} style={{ padding: '16px' }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                        <div style={{ flex: 1 }}>
                          <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '6px' }}>
                            <button onClick={() => updateItem('studyTopics', topic.id, { completed: !topic.completed })} style={{ width: '20px', height: '20px', borderRadius: '4px', border: topic.completed ? 'none' : '2px solid var(--border-medium)', background: topic.completed ? 'var(--accent-green)' : 'transparent', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#fff' }}>
                              {topic.completed && Icons.check}
                            </button>
                            <p style={{ fontWeight: 600, fontSize: '14px', textDecoration: topic.completed ? 'line-through' : 'none', color: topic.completed ? 'var(--text-muted)' : 'var(--text-primary)' }}>{topic.name}</p>
                          </div>
                          <div style={{ display: 'flex', gap: '8px', marginLeft: '30px' }}>
                            <Badge color={topic.category === 'DSA' ? '#60a5fa' : topic.category === 'System Design' ? '#4ade80' : topic.category === 'Behavioral' ? '#fb923c' : topic.category === 'ML' ? '#a78bfa' : '#71717a'}>{topic.category}</Badge>
                            <Badge color={topic.priority === 'High' ? '#f87171' : topic.priority === 'Medium' ? '#facc15' : '#71717a'}>{topic.priority}</Badge>
                          </div>
                          {topic.notes && <p style={{ fontSize: '12px', color: 'var(--text-muted)', marginTop: '8px', marginLeft: '30px' }}>{topic.notes}</p>}
                        </div>
                        <button onClick={() => deleteItem('studyTopics', topic.id)} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', padding: '4px' }}>{Icons.trash}</button>
                      </div>
                    </Card>
                  ))}
                </div>
              )}
            </motion.div>
          )}
          
          <AddJobPrepModal isOpen={!!showAddModal} onClose={() => setShowAddModal(null)} section={showAddModal} onAdd={addItem} />
        </motion.div>
      );
    };
    
    // ============ ADD JOB PREP MODAL ============
    const AddJobPrepModal = ({ isOpen, onClose, section, onAdd }) => {
      const [form, setForm] = useState({});
      
      useEffect(() => { setForm({}); }, [section]);
      
      const handleSubmit = (e) => { e.preventDefault(); onAdd(section, form); };
      
      const titles = { resumes: 'Add Resume', coverLetters: 'Add Cover Letter', templates: 'Add Template', applications: 'Add Application', studyTopics: 'Add Study Topic' };
      
      return (
        <Modal isOpen={isOpen} onClose={onClose} title={titles[section] || 'Add Item'}>
          <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
            {section === 'resumes' && (
              <>
                <Input label="Resume Name" placeholder="e.g., SWE Resume v2" value={form.name || ''} onChange={(e) => setForm(f => ({ ...f, name: e.target.value }))} required />
                <Input label="Target Role" placeholder="e.g., ML Engineer" value={form.targetRole || ''} onChange={(e) => setForm(f => ({ ...f, targetRole: e.target.value }))} />
                <TextArea label="Notes" placeholder="Key highlights, versions, etc." value={form.notes || ''} onChange={(e) => setForm(f => ({ ...f, notes: e.target.value }))} />
              </>
            )}
            
            {section === 'coverLetters' && (
              <>
                <Input label="Name" placeholder="e.g., Google SWE Cover Letter" value={form.name || ''} onChange={(e) => setForm(f => ({ ...f, name: e.target.value }))} required />
                <Input label="Company" placeholder="e.g., Google" value={form.company || ''} onChange={(e) => setForm(f => ({ ...f, company: e.target.value }))} />
                <TextArea label="Content" placeholder="Paste your cover letter..." value={form.content || ''} onChange={(e) => setForm(f => ({ ...f, content: e.target.value }))} style={{ minHeight: '150px' }} />
              </>
            )}
            
            {section === 'templates' && (
              <>
                <Input label="Template Name" placeholder="e.g., Follow-up Email" value={form.name || ''} onChange={(e) => setForm(f => ({ ...f, name: e.target.value }))} required />
                <Select label="Type" value={form.type || 'Email'} onChange={(e) => setForm(f => ({ ...f, type: e.target.value }))} options={[{ value: 'Email', label: 'Email' }, { value: 'LinkedIn', label: 'LinkedIn Message' }, { value: 'Thank You', label: 'Thank You Note' }, { value: 'Other', label: 'Other' }]} />
                <TextArea label="Content" placeholder="Your template text..." value={form.content || ''} onChange={(e) => setForm(f => ({ ...f, content: e.target.value }))} style={{ minHeight: '150px' }} />
              </>
            )}
            
            {section === 'applications' && (
              <>
                <Input label="Company" placeholder="e.g., Snowflake" value={form.company || ''} onChange={(e) => setForm(f => ({ ...f, company: e.target.value }))} required />
                <Input label="Position" placeholder="e.g., ML Engineer Intern" value={form.position || ''} onChange={(e) => setForm(f => ({ ...f, position: e.target.value }))} required />
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>
                  <Select label="Status" value={form.status || 'Wishlist'} onChange={(e) => setForm(f => ({ ...f, status: e.target.value }))} options={[{ value: 'Wishlist', label: 'Wishlist' }, { value: 'Applied', label: 'Applied' }, { value: 'Interview', label: 'Interview' }, { value: 'Offer', label: 'Offer' }, { value: 'Rejected', label: 'Rejected' }]} />
                  <Input label="Date Applied" type="date" value={form.dateApplied || ''} onChange={(e) => setForm(f => ({ ...f, dateApplied: e.target.value }))} />
                </div>
                <TextArea label="Notes" placeholder="Referral, interview notes, etc." value={form.notes || ''} onChange={(e) => setForm(f => ({ ...f, notes: e.target.value }))} />
              </>
            )}
            
            {section === 'studyTopics' && (
              <>
                <Input label="Topic" placeholder="e.g., Dynamic Programming" value={form.name || ''} onChange={(e) => setForm(f => ({ ...f, name: e.target.value }))} required />
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>
                  <Select label="Category" value={form.category || 'DSA'} onChange={(e) => setForm(f => ({ ...f, category: e.target.value }))} options={[{ value: 'DSA', label: 'DSA' }, { value: 'System Design', label: 'System Design' }, { value: 'ML', label: 'ML / Deep Learning' }, { value: 'Behavioral', label: 'Behavioral' }, { value: 'Other', label: 'Other' }]} />
                  <Select label="Priority" value={form.priority || 'Medium'} onChange={(e) => setForm(f => ({ ...f, priority: e.target.value }))} options={[{ value: 'High', label: 'High' }, { value: 'Medium', label: 'Medium' }, { value: 'Low', label: 'Low' }]} />
                </div>
                <TextArea label="Notes" placeholder="Resources, key concepts, etc." value={form.notes || ''} onChange={(e) => setForm(f => ({ ...f, notes: e.target.value }))} />
              </>
            )}
            
            <div style={{ display: 'flex', gap: '12px', marginTop: '8px' }}>
              <Button type="button" variant="secondary" onClick={onClose} style={{ flex: 1 }}>Cancel</Button>
              <Button type="submit" style={{ flex: 1 }}>Add</Button>
            </div>
          </form>
        </Modal>
      );
    };
    
    // ============ GRADES PAGE ============
    const GradesPage = () => {
      const { courses, grades, setGrades } = useData();
      const [showAddGrade, setShowAddGrade] = useState(false);
      
      const calculateGPA = () => {
        if (grades.length === 0) return '0.00';
        const gradePoints = { 'A+': 4.0, 'A': 4.0, 'A-': 3.7, 'B+': 3.3, 'B': 3.0, 'B-': 2.7, 'C+': 2.3, 'C': 2.0, 'C-': 1.7, 'D+': 1.3, 'D': 1.0, 'D-': 0.7, 'F': 0.0 };
        let totalPoints = 0, totalCredits = 0;
        grades.forEach(g => {
          const points = gradePoints[g.grade] || 0;
          const credits = parseFloat(g.credits) || 3;
          totalPoints += points * credits;
          totalCredits += credits;
        });
        return totalCredits > 0 ? (totalPoints / totalCredits).toFixed(2) : '0.00';
      };
      
      const getCourse = (id) => courses.find(c => c.id === id) || { code: '???', name: 'Unknown', color: '#71717a' };
      
      return (
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} style={{ padding: '24px 20px 120px' }}>
          <motion.h1 initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} style={{ fontFamily: "'Fraunces', serif", fontSize: '28px', fontWeight: 700, marginBottom: '24px' }}>Grades</motion.h1>
          
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}>
            <Card style={{ padding: '32px', textAlign: 'center', marginBottom: '24px', background: 'linear-gradient(135deg, rgba(167, 139, 250, 0.15) 0%, rgba(96, 165, 250, 0.1) 100%)' }}>
              <p style={{ fontSize: '14px', color: 'var(--text-muted)', textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>Cumulative GPA</p>
              <p style={{ fontSize: '56px', fontWeight: 700, fontFamily: "'Fraunces', serif", background: 'linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', marginBottom: '8px' }}>{calculateGPA()}</p>
              <p style={{ fontSize: '13px', color: 'var(--text-muted)' }}>Based on {grades.length} {grades.length === 1 ? 'course' : 'courses'}</p>
            </Card>
          </motion.div>
          
          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
            <h2 style={{ fontFamily: "'Fraunces', serif", fontSize: '18px', fontWeight: 600 }}>Course Grades</h2>
            <Button size="sm" onClick={() => setShowAddGrade(true)}>{Icons.plus} Add Grade</Button>
          </div>
          
          {grades.length === 0 ? (
            <Card style={{ padding: '40px 20px', textAlign: 'center' }}>
              <span style={{ fontSize: '48px', display: 'block', marginBottom: '12px' }}>üìä</span>
              <p style={{ color: 'var(--text-muted)' }}>No grades added yet</p>
              <p style={{ color: 'var(--text-muted)', fontSize: '12px', marginTop: '4px' }}>Add your course grades to calculate GPA</p>
            </Card>
          ) : (
            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
              {grades.map((grade, i) => {
                const course = getCourse(grade.courseId);
                return (
                  <motion.div key={grade.id} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 + i * 0.05 }}>
                    <Card style={{ padding: '16px', borderLeft: `3px solid ${course.color}` }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                        <div>
                          <p style={{ fontWeight: 600, fontSize: '14px', marginBottom: '4px' }}>{course.code}</p>
                          <p style={{ fontSize: '12px', color: 'var(--text-muted)' }}>{course.name}</p>
                        </div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                          <div style={{ textAlign: 'right' }}>
                            <p style={{ fontSize: '24px', fontWeight: 700, fontFamily: "'Fraunces', serif", color: grade.grade.startsWith('A') ? '#4ade80' : grade.grade.startsWith('B') ? '#60a5fa' : grade.grade.startsWith('C') ? '#facc15' : '#f87171' }}>{grade.grade}</p>
                            <p style={{ fontSize: '11px', color: 'var(--text-muted)' }}>{grade.credits} credits</p>
                          </div>
                          <button onClick={() => setGrades(prev => prev.filter(g => g.id !== grade.id))} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', padding: '4px' }}>{Icons.trash}</button>
                        </div>
                      </div>
                    </Card>
                  </motion.div>
                );
              })}
            </div>
          )}
          
          <AddGradeModal isOpen={showAddGrade} onClose={() => setShowAddGrade(false)} />
        </motion.div>
      );
    };
    
    const AddGradeModal = ({ isOpen, onClose }) => {
      const { courses, setGrades } = useData();
      const [form, setForm] = useState({ courseId: courses[0]?.id || '', grade: 'A', credits: '3' });
      
      const handleSubmit = (e) => {
        e.preventDefault();
        setGrades(prev => [...prev, { ...form, id: Date.now().toString() }]);
        onClose();
      };
      
      const gradeOptions = ['A+', 'A', 'A-', 'B+', 'B', 'B-', 'C+', 'C', 'C-', 'D+', 'D', 'D-', 'F'];
      
      return (
        <Modal isOpen={isOpen} onClose={onClose} title="Add Grade">
          <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
            <Select label="Course" value={form.courseId} onChange={(e) => setForm(f => ({ ...f, courseId: e.target.value }))} options={courses.map(c => ({ value: c.id, label: `${c.code} - ${c.name}` }))} />
            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>
              <Select label="Grade" value={form.grade} onChange={(e) => setForm(f => ({ ...f, grade: e.target.value }))} options={gradeOptions.map(g => ({ value: g, label: g }))} />
              <Input label="Credits" type="number" min="1" max="6" value={form.credits} onChange={(e) => setForm(f => ({ ...f, credits: e.target.value }))} />
            </div>
            <div style={{ display: 'flex', gap: '12px', marginTop: '8px' }}>
              <Button type="button" variant="secondary" onClick={onClose} style={{ flex: 1 }}>Cancel</Button>
              <Button type="submit" style={{ flex: 1 }}>Add Grade</Button>
            </div>
          </form>
        </Modal>
      );
    };
    
    // ============ MAIN APP ============
    const App = () => {
      const [activeTab, setActiveTab] = useState('dashboard');
      const [showAddAssignment, setShowAddAssignment] = useState(false);
      
      return (
        <DataProvider>
          <div style={{ minHeight: '100vh', background: 'var(--bg-primary)', position: 'relative' }}>
            <div style={{ position: 'fixed', top: 0, left: 0, right: 0, height: '400px', background: 'radial-gradient(ellipse at top, rgba(167, 139, 250, 0.08) 0%, transparent 70%)', pointerEvents: 'none', zIndex: 0 }} />
            
            <main style={{ position: 'relative', zIndex: 1 }}>
              <AnimatePresence mode="wait">
                {activeTab === 'dashboard' && <Dashboard key="dashboard" setActiveTab={setActiveTab} setShowAddAssignment={setShowAddAssignment} />}
                {activeTab === 'assignments' && <AssignmentsPage key="assignments" showAddAssignment={showAddAssignment} setShowAddAssignment={setShowAddAssignment} />}
                {activeTab === 'calendar' && <CalendarPage key="calendar" />}
                {activeTab === 'jobprep' && <JobPrepPage key="jobprep" />}
                {activeTab === 'grades' && <GradesPage key="grades" />}
              </AnimatePresence>
            </main>
            
            <Navigation activeTab={activeTab} setActiveTab={setActiveTab} />
          </div>
        </DataProvider>
      );
    };
    
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
